<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/templates/template.xhtml">
    <ui:define name="body">
        <h:form id="addBookFormId">
            <p:panel header="Add book" styleClass="addBook-panel">
                <p:panelGrid id="addBookPanelId">
                    <p:row>
                        <p:column styleClass="panel-column">
                            <h:outputText value="Title"/>
                            <br/>
                            <p:inputText value="#{bookBean.book.title}" required="true" id="bookTitleId"
                                         maxlength="200"/>
                            <p:message for="bookTitleId" display="text"/>
                        </p:column>
                        <p:column styleClass="panel-column">
                            <h:outputText value="Author"/>
                            <br/>
                            <p:inputText value="#{bookBean.book.author}" id="bookAuthorId" maxlength="200"/>
                            <p:message for="bookAuthorId" display="text"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column styleClass="panel-column">
                            <h:outputText value="ISBN"/>
                            <br/>
                            <p:inputText value="#{bookBean.book.isbn}" required="true" id="bookIsbnId">
                                <f:validator validatorId="isbnValidator"/>
                            </p:inputText>
                            <p:message for="bookIsbnId" display="text"/>
                        </p:column>
                        <p:column styleClass="panel-column">
                            <h:outputText value="Number of Pages"/>
                            <br/>
                            <p:inputText value="#{bookBean.book.pages}" required="true" id="bookPagesId">
                                <f:validateLongRange minimum="0"/>
                            </p:inputText>
                            <p:message for="bookPagesId" display="text"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column styleClass="panel-column">
                            <h:outputText value="Publish Date"/>
                            <br/>
                            <p:calendar value="#{bookBean.book.publishDate}" pattern="dd/MM/yyyy" yearRange="1600:"
                                        showButtonPanel="true" navigator="true" readonlyInput="true"
                                        maxdate="#{bookBean.today}"/>
                        </p:column>
                        <p:column styleClass="panel-column">
                            <h:outputText value="Language"/>
                            <br/>
                            <p:selectOneMenu value="#{bookBean.book.language}" id="bookLanguageId"
                                             styleClass="selectonemenu-style">
                                <f:selectItems value="#{bookBean.languages}"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column styleClass="description-column" colspan="2">
                            <h:outputText value="Description"/>
                            <br/>
                            <p:inputTextarea value="#{bookBean.book.description}" id="bookDescriptionId"
                                             maxlength="32000"/>
                            <p:message for="bookDescriptionId" display="text"/>
                        </p:column>
                    </p:row>
                    <ui:remove>
                        <p:row>
                            <p:column styleClass="description-column" colspan="3">
                                <h:outputText value="Cover (1 file max)"/>
                                <p:fileUpload allowTypes="/(\.|\/)(gif|jpe?g|png)$/" update="coverUploadMessageId"
                                              id="coverUploadId" sizeLimit="100000"
                                              fileUploadListener="#{bookBean.upload}"/>
                                <p:message for="coverUploadId" display="text" id="coverUploadMessageId"/>
                            </p:column>
                        </p:row>
                    </ui:remove>
                    <p:row>
                        <p:column styleClass="description-column" colspan="2">
                            <p:commandButton value="Add Book" action="#{bookBean.save}" update="addBookPanelId"
                                             id="addBookButtonId"/>
                            <p:spacer width="5%" height="1%"/>
                            <p:commandButton value="Reset" action="#{bookBean.resetBook}" immediate="true"
                                             update="addBookPanelId"/>
                            <p:message for="addBookButtonId" display="text"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </p:panel>
        </h:form>
    </ui:define>
</ui:composition>
</html>
